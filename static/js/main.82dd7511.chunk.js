(this["webpackJsonpra-router-crud"]=this["webpackJsonpra-router-crud"]||[]).push([[0],{26:function(t,e,c){},27:function(t,e,c){},38:function(t,e,c){"use strict";c.r(e);var n=c(0),s=c.n(n),a=c(19),o=c.n(a),r=(c(26),c(8)),i=c(2),j=(c(27),c(18),c(4)),u=Object(n.createContext)([]),b=c(1);function d(t){var e=t.url,c=Object(n.useState)(!1),s=Object(j.a)(c,2),a=s[0],o=s[1],r=Object(n.useState)([]),i=Object(j.a)(r,2),d=i[0],l=i[1];return Object(b.jsx)(u.Provider,{value:{advanced:a,setAdvanced:o,posts:d,setPosts:l,url:e},children:t.children})}var l=c(11),O=c.n(l),h=c(14),p=c.n(h),m=c(20);function x(){var t=Object(n.useState)(),e=Object(j.a)(t,2),c=e[0],s=e[1],a=Object(n.useState)(),o=Object(j.a)(a,2),r=o[0],i=o[1],u=Object(n.useState)(!1),b=Object(j.a)(u,2),d=b[0],l=b[1];return Object(n.useEffect)((function(){c&&function(){var t=Object(m.a)(p.a.mark((function t(){var e,n,s,a,o,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.prev=1,e=c.url,n=c.method,s=c.headers,a=c.body,t.next=5,fetch(e,{method:n,headers:s,body:a});case 5:if((o=t.sent).ok){t.next=9;break}throw console.log(o.status,o.body),new Error(o.statusText);case 9:if(204!==o.status){t.next=13;break}i({resolve:"",status:o.status}),t.next=18;break;case 13:return t.next=15,o.json();case 15:r=t.sent,console.log(r),i({resolve:r,status:o.status});case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),console.log(t.t0);case 23:return t.prev=23,l(!1),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[1,20,23,26]])})));return function(){return t.apply(this,arguments)}}()(),console.log(r)}),[c]),[c,s,r,d]}function f(t){var e=Object(n.useContext)(u),c=(e.advanced,e.setAdvanced,e.url),s=e.posts,a=e.setPosts,o=x(),i=Object(j.a)(o,3),d=(i[0],i[1]),l=i[2];return Object(n.useEffect)((function(){l||d({url:"".concat(c,"posts"),method:"GET"}),l&&a(l.resolve)}),[l]),console.log(s),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"main-top",children:Object(b.jsx)(r.b,{to:"/posts/new",className:"button",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})}),l&&l.resolve.map((function(t){return Object(b.jsx)(r.b,{to:"/posts/".concat(t.id),children:Object(b.jsxs)("div",{className:"item-post",children:[Object(b.jsxs)("div",{className:"item-post-header",children:[Object(b.jsx)("div",{className:"item-post-img"}),Object(b.jsxs)("div",{className:"item-post-name",children:[Object(b.jsx)("span",{children:"\u0418\u043c\u044f"}),Object(b.jsx)("span",{children:O()(t.created).fromNow()})]})]}),Object(b.jsx)("div",{className:"item-post-content",children:Object(b.jsx)("p",{children:t.content})})]},t.id)})}))]})}function v(t){var e=Object(n.useContext)(u),c=(e.posts,e.setPosts,e.url),s=Object(n.useState)(),a=Object(j.a)(s,2),o=a[0],r=a[1],i=x(),d=Object(j.a)(i,4),l=(d[0],d[1]),O=d[2],h=(d[3],t.history);return Object(n.useEffect)((function(){O&&h.goBack()}),[O]),Object(b.jsxs)("div",{className:"new-post",children:[Object(b.jsx)("div",{className:"top",children:Object(b.jsx)("span",{onClick:function(){h.goBack()},children:"X"})}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),l({url:"".concat(c,"posts"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:0,content:o})})},children:[Object(b.jsx)("textarea",{name:"text",onChange:function(t){r(t.target.value)},value:o}),Object(b.jsx)("div",{className:"submit",children:Object(b.jsx)("button",{type:"submit",className:"button",children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})})]})]})}function g(t){var e=t.match,c=t.history,a=Object(n.useContext)(u),o=a.posts,i=a.url,d=x(),l=Object(j.a)(d,4),h=(l[0],l[1]),p=l[2],m=(l[3],Number(e.params.id)),f=o.find((function(t){return t.id===m}));return Object(n.useEffect)((function(){p&&c.goBack()}),[p]),Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsx)(r.b,{to:"/",children:"\u041d\u0430\u0437\u0430\u0434"}),Object(b.jsxs)("div",{className:"item-post",children:[Object(b.jsxs)("div",{className:"item-post-header",children:[Object(b.jsx)("div",{className:"item-post-img"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"\u0418\u043c\u044f"}),Object(b.jsx)("span",{children:O()(f.created).fromNow()})]})]}),Object(b.jsx)("div",{className:"item-post-content",children:Object(b.jsx)("p",{children:f.content})}),Object(b.jsxs)("div",{className:"item-post-footer",children:[Object(b.jsx)("button",{className:"change button",onClick:function(t){c.push("/posts/change/".concat(m))},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(b.jsx)("button",{className:"remove button",onClick:function(t){h({url:"".concat(i,"posts/").concat(m),method:"DELETE"})},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]},f.id)]})}var N=c(17);function k(t){var e=t.match,c=t.history,s=Object(n.useContext)(u),a=s.posts,o=s.setPosts,r=s.url,i=Object(n.useState)(),d=Object(j.a)(i,2),l=d[0],O=d[1],h=x(),p=Object(j.a)(h,4),m=(p[0],p[1]),f=p[2],v=(p[3],Number(e.params.id));return Object(n.useEffect)((function(){var t=a.find((function(t){return t.id===v}));O(t.content),f&&(o((function(t){return t.map((function(t){return t.id===v?Object(N.a)(Object(N.a)({},t),{},{content:l}):t}))})),c.goBack())}),[f]),Object(b.jsxs)("div",{className:"change-post",children:[Object(b.jsx)("p",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044e"}),Object(b.jsx)("div",{className:"top",children:Object(b.jsx)("span",{className:"close",onClick:function(){c.goBack()},children:"X"})}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),m({url:"".concat(r,"posts"),method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v,content:l})})},children:[Object(b.jsx)("textarea",{name:"text",onChange:function(t){O(t.target.value)},value:l}),Object(b.jsx)("div",{className:"submit",children:Object(b.jsx)("button",{type:"submit",className:"button",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})]})}function y(){return Object(b.jsx)(d,{url:"https://ra-crud-back.herokuapp.com/",children:Object(b.jsx)(r.a,{children:Object(b.jsx)("div",{children:Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/posts/new",component:v}),Object(b.jsx)(i.a,{path:"/posts/change/:id",component:k}),Object(b.jsx)(i.a,{path:"/posts/:id",component:g}),Object(b.jsx)(i.a,{path:"/",component:f})]})})})})}var C=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,39)).then((function(e){var c=e.getCLS,n=e.getFID,s=e.getFCP,a=e.getLCP,o=e.getTTFB;c(t),n(t),s(t),a(t),o(t)}))};o.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(y,{})}),document.getElementById("root")),C()}},[[38,1,2]]]);
//# sourceMappingURL=main.82dd7511.chunk.js.map